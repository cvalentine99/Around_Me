<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      (function() {
        var animations = localStorage.getItem('valentine-animations');
        if (animations === 'off') {
          document.documentElement.setAttribute('data-animations', 'off');
        }
      })();
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Valentine RF // Change Password</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}" />
  </head>
  <body>
    <div class="landing-overlay">
      <div class="globe-background">
        <svg class="globe-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
          <circle cx="200" cy="200" r="180" fill="none" stroke="currentColor" stroke-width="0.5"/>
          <ellipse cx="200" cy="200" rx="180" ry="40" fill="none" stroke="currentColor" stroke-width="0.5"/>
          <ellipse cx="200" cy="140" rx="145" ry="30" fill="none" stroke="currentColor" stroke-width="0.3"/>
          <ellipse cx="200" cy="260" rx="145" ry="30" fill="none" stroke="currentColor" stroke-width="0.3"/>
          <ellipse cx="200" cy="200" rx="40" ry="180" fill="none" stroke="currentColor" stroke-width="0.5" class="meridian meridian-1"/>
          <ellipse cx="200" cy="200" rx="100" ry="180" fill="none" stroke="currentColor" stroke-width="0.3" class="meridian meridian-2"/>
          <g class="rotating-meridians">
            <ellipse cx="200" cy="200" rx="70" ry="180" fill="none" stroke="currentColor" stroke-width="0.3"/>
            <ellipse cx="200" cy="200" rx="130" ry="180" fill="none" stroke="currentColor" stroke-width="0.3"/>
          </g>
        </svg>
      </div>
      <div class="landing-scanline"></div>

      <div class="landing-content">
        <div class="landing-logo">
          <svg width="80" height="80" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 30 Q5 50, 15 70" stroke="#a78bfa" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.5"/>
            <path d="M22 35 Q14 50, 22 65" stroke="#a78bfa" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.7"/>
            <path d="M85 30 Q95 50, 85 70" stroke="#a78bfa" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.5"/>
            <path d="M78 35 Q86 50, 78 65" stroke="#a78bfa" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.7"/>
            <circle cx="50" cy="22" r="6" fill="#34d399" />
            <rect x="44" y="35" width="12" height="45" rx="2" fill="#a78bfa" />
            <rect x="38" y="35" width="24" height="4" rx="1" fill="#a78bfa" />
            <rect x="38" y="76" width="24" height="4" rx="1" fill="#a78bfa" />
          </svg>
        </div>

        <h1 class="landing-title">PASSWORD CHANGE REQUIRED</h1>
        <p class="landing-tagline">// Set a new password to continue (min 12 characters)</p>

        <div class="login-box">
          <div class="flash-container">
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="flash-error">
                    <span class="error-prefix">{{ 'SIGNAL_OK:' if category == 'success' else 'SIGNAL_ERR:' }}</span>
                    <span class="error-message">{{ message|upper }}</span>
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}
          </div>

          <form method="POST" action="{{ url_for('change_password') }}">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}" />
            <input type="password" name="new_password" placeholder="NEW PASSWORD" class="form-input" required autofocus minlength="12" />
            <input type="password" name="confirm_password" placeholder="CONFIRM PASSWORD" class="form-input" required minlength="12" />

            <button type="submit" class="landing-enter-btn">
              <span class="btn-text">UPDATE PASSWORD</span>
            </button>
          </form>
        </div>

        <p class="landing-version">SYSTEM AUTH v{{ version }}</p>
      </div>
    </div>
  </body>
</html>
